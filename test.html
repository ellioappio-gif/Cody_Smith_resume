<!DOCTYPE html>
<html>
<head>
    <title>Calculator Test</title>
</head>
<body>
    <h1>Calculator Test</h1>
    <input type="range" id="avgDealSize" min="1" max="50" value="6" step="0.5" oninput="testHandle(this.value)">
    <span id="avgDealSizeDisplay">$6K</span>
    
    <script>
    console.log('Test script started');
    
    window.Calculator = {
        state: { avgDealSize: 6000 },
        results: { totalRevenue: 0 },
        update: function(key, value) {
            console.log('Update called:', key, value);
            this.state[key] = value;
            this.display();
        },
        display: function() {
            console.log('Display called');
            const el = document.getElementById('avgDealSizeDisplay');
            if (el) {
                el.textContent = '$' + (this.state.avgDealSize / 1000) + 'K';
                console.log('Updated element to:', el.textContent);
            } else {
                console.warn('Element not found!');
            }
        }
    };
    
    window.testHandle = function(value) {
        console.log('Handler called:', value);
        window.Calculator.update('avgDealSize', parseFloat(value) * 1000);
    };
    
    console.log('Calculator defined:', typeof window.Calculator);
    console.log('Handler defined:', typeof window.testHandle);
    console.log('Element exists:', document.getElementById('avgDealSizeDisplay') !== null);
    </script>
</body>
</html>
